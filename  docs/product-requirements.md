Telegram Quiz Bot for Stepik – PRD
1. Overview / Problem
Пользователь изучает курсы на платформе Stepik, но нередко сталкивается с пропуском активного повторения или слабой вовлеченностью. Возникает необходимость в автоматическом, регулярном квизинге по материалу уроков для лучшего закрепления информации. Цель — создать Telegram-бота MVP, который каждые два часа генерирует квиз по текущему уроку пользователя на Stepik.

2. Key User Flows
Пользователь авторизуется в Telegram-боте и привязывает Stepik-токен.
Бот каждые 2 часа:
Делает API-запрос в Stepik для получения текущего урока.
Получает название темы, название и текст урока.
Отправляет данные в OpenAI GPT-4.1-mini API.
Получает квиз и отправляет его пользователю.
Версия 1.1 (опционально):

После ответа пользователя:
Если правильно — переходит к следующему уроку.
Если ошибка — повторяет текущий урок.
3. Functional Requirements
Telegram-бот должен:

Поддерживать команду /start и запрос токена Stepik.
Хранить токен пользователя (в sqlite или JSON-файле).
Каждые 2 часа опрашивать Stepik API текущего курса и урока.
Отправлять информацию в OpenAI API и получать квиз.
Отправлять квиз пользователю в виде сообщения с кнопками.
Обрабатывать ответ и отправлять корректную реакцию.
Stepik API:

Получить current_step_id пользователя.
Получить step и lesson по ID.
Отправлять действия "отметить урок завершенным" (в 1.1).
OpenAI API:

Вызов GPT-4.1-mini со входными данными: title, topic, lesson text.
Парсинг ответа в формат quiz-question + варианты.
4. Non-Goals
Поддержка нескольких параллельных курсов.
Сложная авторизация через OAuth.
UI-интерфейс, веб-панель.
Отслеживание прогресса по всем курсам.
5. Milestones & Release Plan
М0 (День 0-1): MVP

 Инициализация проекта, подключение к Telegram Bot API
 Подключение к Stepik API (через ключ пользователя)
 Интеграция с OpenAI для генерации квиза
 Cron/таймер для квизов каждые 2 часа
 Отправка квиза в Telegram с кнопками
М1 (Версия 1.1):

 Обработка ответа пользователя
 Вызов перехода к следующему уроку при правильном ответе
 Повтор текущего урока при ошибке
М2+ (после успеха MVP):

 UI-меню курсов и уроков
 Выбор частоты повторений
 Поддержка нескольких курсов
Информация по Stepik API:

Документация: https://stepik.github.io/api-docs/
Авторизация: простая через токен (передаётся в заголовке Authorization: Bearer <token>)
Получение текущего шага: /api/users/{id} → поле last_step
Получение step, lesson: /api/steps/{id}, /api/lessons/{id}
